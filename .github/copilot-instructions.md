# Copilot Instructions for Shimesukun

このファイルは GitHub Copilot に対して、このリポジトリでのコード補完や提案をする際のガイドラインを提供するためのものです。

## プロジェクト概要

Shimesukun（シメスくん）は、マンションの書類をデジタル化し、効率的に管理・検索するための Web アプリケーション。
既存のものと比べると、OCR の活用、横断検索、質問に対する AI による提案が特徴。

## 技術スタック

このプロジェクトでは以下の技術を使用しています：

- 言語: TypeScript
- フレームワーク: Next.js (App Router)
- データベース: Firebase
- 認証: Firebase Authentication
- UI コンポーネント:
  - Radix UI (@radix-ui/react-\*)
  - shadcn/ui スタイルのコンポーネント
- スタイリング: Tailwind CSS
- その他の主要ライブラリ:
  - clsx/class-variance-authority（クラス名の条件付き結合）
  - Web Speech API（音声認識機能）

## コーディング規約

- インデントにはスペースを使用し、幅は 2 とします
- 変数名や関数名にはキャメルケースを採用しています（例: `handleSubmit`, `currentUser`）
- コンポーネント名はパスカルケースを使用します（例: `UserNav`, `DocumentList`）
- JSDoc 形式のコメントを使用して、関数やコンポーネントの目的を説明しています
- 関数コンポーネントには説明的なコメントブロックを付けています
- 非同期関数には適切なエラーハンドリングを実装しています
- 状態管理には React の useState と useEffect を活用しています

## アーキテクチャ

このプロジェクトはコンポーネントベースのアーキテクチャを採用しています。

### ディレクトリ構造

- `/src/app` - Next.js の App Router ページ
- `/src/components` - 再利用可能な UI コンポーネント
- `/src/contexts` - React Context（認証など）
- `/src/lib` - ユーティリティ関数やヘルパー

### 主要な機能コンポーネント

- DashboardPage - メインのダッシュボード画面
- LoginForm/SignupForm - ユーザー認証フォーム
- UserNav - ユーザーナビゲーション
- SearchBar - 検索機能（テキストと音声入力対応）
- DocumentList/DocumentUploader - 書類の表示とアップロード

### 認証フロー

- Firebase Authentication を使用
- メール/パスワード認証と Google 認証に対応
- AuthContext を使って認証状態を管理

### データフロー

1. ユーザーがログイン
2. ダッシュボードでの操作（書類閲覧、検索、AI 質問など）
3. Firebase 経由でのデータ取得・保存

## 機能要件

主な機能は以下の通りです：

1. **書類アップロード機能**

   - PDF・画像ファイルのアップロード
   - OCR によるテキスト抽出（日本語対応）
   - AI によるカテゴリー・ネーミング提案

2. **書類表示・検索機能**

   - PDF プレビューと OCR テキスト表示
   - キーワード検索とフィルタリング
   - マンション別一覧表示

3. **AI 質問応答機能**

   - 書類内容に基づく質問応答
   - 関連情報の提示
   - 他マンションでの事例提供

4. **ユーザー管理機能**
   - ログイン・ログアウト
   - アクセス権限管理
   - マンション別権限設定

## 補完時の注意点

- 日本語のユーザーインターフェース文言を使用してください
- 非同期処理には必ずローディング状態とエラーハンドリングを含めてください
- ユーザー認証状態のチェックを適切に行ってください
- 若者からお年寄りまで使うので、アクセシビリティに配慮したコードを推奨します
- レスポンシブデザインを心がけてください

- エラーが発生したら TROUBLESHOOTING.md にエラー内容と解決策を追加してください
- デプロイ方法は DEPLOYMENT.md に追加してください
- README.md にはプロジェクトの概要、主な機能、技術スタック、開発環境のセットアップ方法、ライセンス情報を記載してください。
- 各種 md ファイルは随時修正してください
- copilot とユーザーのやり取りは、CHATHISTORY.md に記録してください
- copilot-instructions.md は随時更新してください

## 用語集

- **OCR**: 光学式文字認識（Optical Character Recognition）。画像内のテキストをデジタルテキストに変換する技術
- **書類**: マンション管理に関連するあらゆる文書（議事録、点検報告書、見積書など）
- **マンション**: 分譲マンションの建物単位
- **管理組合**: マンションの区分所有者で構成される自治組織

## github copilot のユーザーについて

- プログラミング初心者。
- 分譲マンション管理のプロ。マンション管理について質問があれば遠慮なくユーザーに確認してください。
- 触れた技術は以下の通り。
  - TypeScript（ごくわずか）
  - Next.js（ごくわずか）
  - React(ごくわずか)
  - vb.net
  - vba(最も経験がある)
  - javascript
  - html
  - css
  - sql
  - mysql
  - php
  - laravel
  - firebase
- 対話形式、ハンズオンで、丁寧に説明、相談をしてほしいと考えている。
- このプロジェクトには、自分のスキルを向上させるため、またこのプロダクトをもとに起業するために取り組んでいる。
- copilot への依頼が抽象的な場合がある。回答文字数が制限を超える場合は、要点をまとめて制限内に抑えて回答すること。
- 実装方針についてメリットとデメリットを踏まえて提案してほしい。
- 実装前には、修正するファイルや目的を説明し、確認してほしい。

このファイルは随時更新されます。プロジェクトの進行に合わせて適宜内容を更新してください。
